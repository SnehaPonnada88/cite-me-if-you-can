# üß† Cite Me If You Can

A mini data science challenge that combines **semantic search** + **LLM-powered Q&A** on academic research chunks.  
Built using FastAPI, Qdrant vector database, Sentence Transformers, and OpenAI GPT.

---

## üöÄ What It Does

> Give me context, and I‚Äôll cite it back.

This system enables two main features:

1. **Semantic Similarity Search**  
   Search through academic chunks using vector embeddings and retrieve the most relevant ones.

2. **GPT-powered Contextual Answering**  
   Ask research questions, and receive answers generated by OpenAI GPT with real citations from source documents.

---

## üìÇ Project Structure

cite-me-if-you-can/
‚îú‚îÄ‚îÄ api/
‚îÇ ‚îú‚îÄ‚îÄ similarity_search.py ‚Üê /api/similarity_search
‚îÇ ‚îú‚îÄ‚îÄ ask_with_context.py ‚Üê /api/ask_with_context
| |-- upload_chunks.py ‚Üê /api/upload (for loading chunks)
‚îÇ ‚îî‚îÄ‚îÄ usage_count.py ‚Üê /api/usage_count
‚îú‚îÄ‚îÄ ingestion/
‚îÇ ‚îî‚îÄ‚îÄ ingest_pipeline.py ‚Üê loads JSON chunks into Qdrant
‚îú‚îÄ‚îÄ utils/
‚îÇ ‚îî‚îÄ‚îÄ usage_tracker.py ‚Üê optional usage logging
‚îú‚îÄ‚îÄ main.py ‚Üê FastAPI app entrypoint
‚îú‚îÄ‚îÄ .env ‚Üê OpenAI API key
‚îú‚îÄ‚îÄ requirements.txt
‚îî‚îÄ‚îÄ README.md


---

## üß™ API Endpoints

> Testable via Swagger UI at [`/docs`](http://127.0.0.1:8000/docs)

### `POST /api/upload`

Upload a JSON file of text chunks to populate the Qdrant collection.  
Sample format:

```json
[
  {
    "text": "Velvet bean helps fix nitrogen...",
    "source_doc_id": "AGRO001",
    "section_heading": "Soil Benefits",
    "journal": "AgroScience Journal",
    "publish_year": 2020
  },
  ...
]

### 'POST /api/similarity_search' 
Returns the most semantically similar chunks to a query.

Request:
{
  "query": "What is velvet bean used for?",
  "k": 3,
  "min_score": 0.25
}
Response:
{
  "query": "What is velvet bean used for?",
  "results": [
    {
      "score": 0.785058,
      "text": null,
      "source": "extension_brief_mucuna.pdf",
      "section": "Why grow the velvet bean? (part 1)",
      "journal": "ILRI extension brief",
      "year": 2016
    },
    {
      "score": 0.785058,
      "text": "The velvet bean can be grown for soil fertility, green manure and as a cover crop in conservation agriculture (CA). The velvet bean is a high yielding leguminous forage crop‚Äîhigh in nitrogen (N)/crude protein content. It is usually sown as an N-fixing ley crop or as a green manure crop to improve soil fertility. In the sub-humid regions it can be intercropped with maize to improve soil fertility, maximize grain/herbage yields per unit area and provide mixed crop for hay/silage making. Whether it is grown as a single or mixed crop, the velvet bean provides early dry season grazing or fodder for hay or mixed-crop silage, improving the N content of cereal or grass silage.",
      "source": "extension_brief_mucuna.pdf",
      "section": "Why grow the velvet bean? (part 1)",
      "journal": "ILRI extension brief",
      "year": 2016
    },
    {
      "score": 0.785058,
      "text": "The velvet bean can be grown for soil fertility, green manure and as a cover crop in conservation agriculture (CA). The velvet bean is a high yielding leguminous forage crop‚Äîhigh in nitrogen (N)/crude protein content. It is usually sown as an N-fixing ley crop or as a green manure crop to improve soil fertility. In the sub-humid regions it can be intercropped with maize to improve soil fertility, maximize grain/herbage yields per unit area and provide mixed crop for hay/silage making. Whether it is grown as a single or mixed crop, the velvet bean provides early dry season grazing or fodder for hay or mixed-crop silage, improving the N content of cereal or grass silage.",
      "source": "extension_brief_mucuna.pdf",
      "section": "Why grow the velvet bean? (part 1)",
      "journal": "ILRI extension brief",
      "year": 2016
    }
  ]
}

### 'POST /api/ask_with_context'
Uses GPT (via OpenAI API) to generate a research-style answer with citations.

Request:
{
  "question": "What are the benefits of velvet bean for soil?",
  "k": 3
}
Response:
{
  "question": "What are the benefits of velvet bean for soil?",
  "citations": [
    "[AgroScience Journal - Soil Benefits]",
  ],
  "answer": "Velvet bean has been found to improve soil fertility and provide natural nitrogen fixation. This can result in enhanced nutrient content in the soil, leading to improved plant growth and crop yields. Additionally, velvet bean can help reduce the need for synthetic fertilizers, thereby promoting more sustainable agricultural practices. [AgroScience Journal - Soil Benefits]"
}


## 'Tech Stack'

üß† OpenAI GPT-3.5 Turbo

üîç Qdrant vector search

üßæ Sentence Transformers (all-MiniLM-L6-v2)

‚ö° FastAPI

üê≥ Docker (for Qdrant container)

## 'üõ†Ô∏è Setup & Run'
bash

# 1. Create virtual env
conda create -n cite-ai python=3.10
conda activate cite-ai

# 2. Install dependencies
pip install -r requirements.txt

# 3. Run Qdrant in Docker
docker run -p 6333:6333 -p 6334:6334 qdrant/qdrant

# 4. Run the FastAPI app
uvicorn main:app --reload

# 5. Open the Swagger UI
http://127.0.0.1:8000/docs

## 'üì¶ Versioning'

v0.1 ‚Äì Initial folders setup

v0.2 ‚Äì Ingestion pipeline setupwith embedding and Qdrant Integration

v0.3 ‚Äì Similarity Search Endpoint

v0.4 ‚Äì Dockerized Qdrant integration

v0.5 - GPT Answer API Endpoint

v0.6 - Upload Endpoint

v0.7 ‚Äì Usage count for endpoint tracking



